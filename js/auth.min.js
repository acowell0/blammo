var init=function(){init.authenticated=!1;init.favePlaylistId;init.faves=[]},auth=function(){init();auth.token;gapi.auth.authorize({client_id:"206932619037-ck9ljfqts067tn3okm6llomlfc2m22ri.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/youtube",immediate:!1},function(){$("#signin").hide();$("#signout").show();console.log("login complete");init.authenticated=!0;$("#my-container").find("h3").hide();auth.token=gapi.auth.getToken();console.log("access token: "+auth.token.access_token);
var a;a="https://www.googleapis.com/youtube/v3/playlists?part=snippet&mine=true&fields=items(id%2Csnippet%2Ftitle)&access_token="+auth.token.access_token;$.getJSON(a,function(a){for(i=0;i<a.items.length;i++)"acowell-apidemo-faves"===a.items[i].snippet.title&&(init.favePlaylistId=a.items[i].id,getFaves(init.favePlaylistId));"undefined"==typeof init.favePlaylistId&&(console.log("playlist [acowell-apidemo-faves] not found"),createPlaylist("acowell-apidemo-faves"))})})};$("#signin").click(function(){auth()});
$("#signout").click(function(){$.ajax({type:"GET",url:"https://accounts.google.com/o/oauth2/revoke?token="+auth.token.access_token,async:!1,contentType:"application/json",dataType:"jsonp",success:function(a){init.authenticated=!1;$("#signout").hide();$("#signin").show();clearResultsList($("#faveResults"),"f");$("#my-container").find("h3").show();init.faves=[];init.favePlaylistId=void 0;console.log("sign-out successful")},error:function(a){alert("Sign-out unsuccessful. See log for details.");console.log(a)}})});
